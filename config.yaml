# Configuration for the Voice Bot Pipeline (SAG v2.0 Optimized)

# Logging configuration
logging:
  level: "INFO" # DEBUG, INFO, WARNING, ERROR
  log_file: "pipeline.log"

# Global pipeline settings
pipeline:
  # YouTube subtitles download settings (сохраняем для анализа)
  subtitles:
    output_dir: "data/raw_subtitles"  # Сохраняем сырые субтитры
    # Options: "ru", "en", etc.
    language: "ru"

  # Text processing settings - DIRECT TO SAG v2.0
  text_processing:
    output_dir: "data/sag_final"  # Прямо в финальную папку SAG v2.0

  # SAG v2.0 extractors configuration
  sag_v2:
    use_safety_extractor: true
    use_causal_chain_extractor: true
    use_concept_hierarchy_extractor: true
    use_case_study_extractor: true
    use_prerequisite_extractor: true
    models:
      safety: gpt-4o-mini
      causal: gpt-4o-mini
      hierarchy: gpt-4o-mini
      case_study: gpt-4o-mini
      prerequisite: gpt-4o-mini

  # Directory for pipeline run results and logs
  results_dir: "data/sag_final"  # Результаты тоже в SAG v2.0

# Vector Database settings (ChromaDB)
vector_db:
  # Путь к директории с базой данных ChromaDB
  db_path: "data/chromadb"
  
  # Префикс для имен коллекций
  collection_prefix: "sag_v2"
  
  # Автоматическая индексация после обработки
  auto_index: true  # Установите true для автоматической индексации
  
  # Уровни индексации (documents, blocks, graph_entities)
  index_levels:
    - "documents"
    - "blocks"
    - "graph_entities"
  
  # Настройки эмбеддингов
  embedding:
    provider: "sentence-transformers"  # Провайдер эмбеддингов
    model: "intfloat/multilingual-e5-large"  # Модель Sentence-Transformers
    dimension: 1024  # Размерность эмбеддингов (для multilingual-e5-large)
  
  # Размер батча для индексации
  batch_size: 100
  
  # Примечание: rate_limiting больше не нужен для локальных моделей Sentence-Transformers
  # Все настройки rate limiting удалены, так как модель работает локально без API запросов