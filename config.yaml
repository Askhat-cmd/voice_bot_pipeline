# Configuration for the Voice Bot Pipeline (SAG v2.0 Optimized)

# Logging configuration
logging:
  level: "INFO" # DEBUG, INFO, WARNING, ERROR
  log_file: "pipeline.log"

# Global pipeline settings
pipeline:
  # YouTube subtitles download settings (—Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞)
  subtitles:
    output_dir: "data/raw_subtitles"  # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—ã—Ä—ã–µ —Å—É–±—Ç–∏—Ç—Ä—ã
    # Options: "ru", "en", etc.
    language: "ru"

  # Text processing settings - DIRECT TO SAG v2.0
  text_processing:
    output_dir: "data/sag_final"  # –ü—Ä—è–º–æ –≤ —Ñ–∏–Ω–∞–ª—å–Ω—É—é –ø–∞–ø–∫—É SAG v2.0

  # Directory for pipeline run results and logs
  results_dir: "data/sag_final"  # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–æ–∂–µ –≤ SAG v2.0

# Vector Database settings (ChromaDB)
vector_db:
  # –ü—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö ChromaDB
  db_path: "data/chromadb"
  
  # –ü—Ä–µ—Ñ–∏–∫—Å –¥–ª—è –∏–º–µ–Ω –∫–æ–ª–ª–µ–∫—Ü–∏–π
  collection_prefix: "sag_v2"
  
  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
  auto_index: true  # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ true –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
  
  # –£—Ä–æ–≤–Ω–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (documents, blocks, graph_entities)
  index_levels:
    - "documents"
    - "blocks"
    - "graph_entities"
  
  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
  embedding:
    model: "text-embedding-3-small"  # OpenAI –º–æ–¥–µ–ª—å
    dimension: 1536  # –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
  
  # –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
  batch_size: 100
  
  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –∫–≤–æ—Ç–æ–π (–û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–û)
  rate_limiting:
    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ –¥–ª—è –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∫ API
    # OpenAI –ª–∏–º–∏—Ç: –¥–æ 2048 —Ç–µ–∫—Å—Ç–æ–≤ –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ
    # –í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
    # –≠—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –∫–≤–æ—Ç–µ RPM
    chunk_size: 2048  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
    # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    # ‚ö° –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–û: –î–ª—è Usage Tier 1 (3000 RPM) –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 0.5 —Å–µ–∫—É–Ω–¥—ã
    # –ü—Ä–∏ 3000 RPM –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å 50 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É, 0.5 —Å–µ–∫—É–Ω–¥—ã = –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø–∞—Å
    delay_between_requests: 0.5  # –ò–ó–ú–ï–ù–ï–ù–û: –±—ã–ª–æ 15
    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–µ rate limit
    max_retries: 5
    # –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ retry –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (—ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è)
    retry_delay: 2
    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ retry –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    max_retry_delay: 60
    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    # üöÄ –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–û: –î–ª—è Usage Tier 1 (3000 RPM) –≤–∫–ª—é—á–µ–Ω –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º
    # 3 –≤–æ—Ä–∫–µ—Ä–∞ = –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–µ—Ö –±–∞—Ç—á–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ–Ω–µ–µ 1% –æ—Ç –ª–∏–º–∏—Ç–æ–≤ API, –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
    max_workers: 3  # –ò–ó–ú–ï–ù–ï–ù–û: –±—ã–ª–æ 1
  
  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤
  text_processing:
    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ –æ–¥–∏–Ω —Ç–µ–∫—Å—Ç (–ª–∏–º–∏—Ç OpenAI: 8192, –æ—Å—Ç–∞–≤–ª—è–µ–º –∑–∞–ø–∞—Å)
    max_tokens_per_text: 8000
    # –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏ –ø—Ä–∏ —Ä–∞–∑–±–∏–µ–Ω–∏–∏ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ (–≤ —Ç–æ–∫–µ–Ω–∞—Ö)
    chunk_overlap: 100