# ๐ ะััะธัะตะบัััะฐ ะธ ะบะพะผะฟะพะฝะตะฝัั

## ะะฐะฒะธะณะฐัะธั

- [ะะฐะทะฐะด ะบ README](../README.md)
- [ะกัััะบัััะฐ ะฟัะพะตะบัะฐ](#ััััะบัััะฐ-ะฟัะพะตะบัะฐ)
- [ะกะธััะตะผะฐ ัะบัััะฐะบัะพัะพะฒ](./extractors-system.md)
- [ะะพะฝัะธะณััะฐัะธั](./configuration.md)

---

## ะกัะตะผะฐ ัะฐะฑะพัั

```
YouTube URL โ ะกัะฑัะธััั โ ะกะตะผะฐะฝัะธัะตัะบะธะต ะฑะปะพะบะธ โ JSON ะดะปั ะฒะตะบัะพัะฝะพะน ะะ
     โ              โ                โ                    โ
1. ะะทะฒะปะตัะตะฝะธะต    2. ะงะธััะบะฐ      3. ะกัััะบัััะฐ      4. ะะตัะฐะดะฐะฝะฝัะต
   ััะฑัะธััะพะฒ       ัะตะบััะฐ         + ัะฐะนะผะบะพะดั        + ID + ัััะปะบะธ
```

---

## ะะปััะตะฒัะต ะบะพะผะฟะพะฝะตะฝัั

### 1. **Subtitle Extractor** (`subtitle_extractor/`)

**ะะฐะทะฝะฐัะตะฝะธะต**: ะะทะฒะปะตัะตะฝะธะต ััะฑัะธััะพะฒ ั YouTube

**ะขะตัะฝะพะปะพะณะธั**: `youtube-transcript-api`

**ะะพะดะดะตัะถะธะฒะฐะตะผัะต ัะพัะผะฐัั**:
- ะะฑััะฝัะต ะฒะธะดะตะพ: `youtube.com/watch?v=ID`
- ะะพัะพัะบะธะต ัััะปะบะธ: `youtu.be/ID`
- Live-ััะฐะฝัะปััะธะธ: `youtube.com/live/ID`

**ะััะพะดะฝัะต ัะพัะผะฐัั**: JSON (ััััะบัััะธัะพะฒะฐะฝะฝัะน), SRT (ััะฐะฝะดะฐััะฝัะน), TXT (ัะธัััะน ัะตะบัั)

---

### 2. **Text Processor** (`text_processor/`)

**ะะฐะทะฝะฐัะตะฝะธะต**: ะัะตะพะฑัะฐะทะพะฒะฐะฝะธะต ััะฑัะธััะพะฒ ะฒ ัะตะผะฐะฝัะธัะตัะบะธะต ะฑะปะพะบะธ ั SAG v2.0

**ะะพัััะฟะฝัะต ะฟัะพัะตััะพัั**:
- `sarsekenov_processor.py` โ **SAG v2.0 ะดะพะผะตะฝะฝัะน** (ะฝะตะนัะพััะฐะปะบะธะฝะณ/ะฝะตะพััะฐะปะบะธะฝะณ)
- `subtitles_to_blocks.py` โ ัะฝะธะฒะตััะฐะปัะฝัะน

**ะะ-ะผะพะดะตะปะธ**: OpenAI GPT (ะฝะฐัััะฐะธะฒะฐะตะผัะต ัะตัะตะท .env)

**SAG v2.0 ะฒะพะทะผะพะถะฝะพััะธ**:
- ะะฒัะพะผะฐัะธัะตัะบะฐั ะบะปะฐััะธัะธะบะฐัะธั ะฑะปะพะบะพะฒ
- ะะทะฒะปะตัะตะฝะธะต ะณัะฐั-ัััะฝะพััะตะน (442 ัะทะปะฐ + 259 ะพัะฝะพัะตะฝะธะน)
- ะะพััะพะปะพะณะธัะตัะบะฐั ะพะฑัะฐะฑะพัะบะฐ ััััะบะพะณะพ ัะทัะบะฐ
- ะฃะผะฝะฐั ะผะฐัััััะธะทะฐัะธั ะฟะพ ะบะพะปะปะตะบัะธัะผ

**ะกะธััะตะผะฐ ัะบัััะฐะบัะพัะพะฒ ะทะฝะฐะฝะธะน (5 ััะฐะฟะพะฒ)**:
- **ะญัะฐะฟ 1**: `TerminologyValidator` โ ัะธะปััั ะบะฐัะตััะฒะฐ ัะตัะผะธะฝะพะฒ
- **ะญัะฐะฟ 2**: `NeurostalkingPatternExtractor` โ ะดะตัะตะบัะพั ะฟะฐััะตัะฝะพะฒ
- **ะญัะฐะฟ 3**: `CausalChainExtractor` โ ะฟัะธัะธะฝะฝะพ-ัะปะตะดััะฒะตะฝะฝัะต ัะตะฟะพัะบะธ
- **ะญัะฐะฟ 4**: `ConceptHierarchyExtractor` โ ะธะตัะฐััะธั ะบะพะฝัะตะฟัะพะฒ
- **ะญัะฐะฟ 5**: `SarsekenovProcessor` โ ะพัะบะตัััะฐัะพั (ะพะฑัะตะดะธะฝัะตั ะฒัั)

**ะะพะฟะพะปะฝะธัะตะปัะฝัะต ัะบัััะฐะบัะพัั** (LLM-based ะผะพะดัะปะธ):
- `safety_extractor.py` โ ะะฝัะพัะผะฐัะธั ะพ ะฑะตะทะพะฟะฐัะฝะพััะธ ะธ ะฟัะพัะธะฒะพะฟะพะบะฐะทะฐะฝะธัั
- `causal_chain_extractor.py` โ ะัะธัะธะฝะฝะพ-ัะปะตะดััะฒะตะฝะฝัะต ัะตะฟะพัะบะธ ะฟัะพัะตััะพะฒ
- `concept_hierarchy_extractor.py` โ ะะตัะฐััะธั ะบะพะฝัะตะฟัะพะฒ
- `case_study_extractor.py` โ ะกัััะบัััะธัะพะฒะฐะฝะฝัะต ะบะตะนัั ะฟัะธะผะตะฝะตะฝะธั ะฟัะฐะบัะธะบ
- `prerequisite_extractor.py` โ ะัะตะดะฟะพััะปะบะธ ะธ ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั ะพะฑััะตะฝะธั

**ะะดะต ัะพััะฐะฝััััั ะดะฐะฝะฝัะต ัะบัััะฐะบัะพัะพะฒ**: ะััะผะพ ะฒ ะฑะปะพะบะธ ัะธะฝะฐะปัะฝะพะณะพ JSON (`data/sag_final/{year}/{month}/*.for_vector.json`)

---

### 3. **Vector Database** (`vector_db/`)

**ะะฐะทะฝะฐัะตะฝะธะต**: ะกะตะผะฐะฝัะธัะตัะบะธะน ะฟะพะธัะบ ะฟะพ ะพะฑัะฐะฑะพัะฐะฝะฝัะผ ะดะฐะฝะฝัะผ

**ะขะตัะฝะพะปะพะณะธั**: ChromaDB + Sentence-Transformers

**ะะพะดะตะปั ัะผะฑะตะดะดะธะฝะณะพะฒ**: `intfloat/multilingual-e5-large` (1024 dim, ะปะพะบะฐะปัะฝะฐั ะณะตะฝะตัะฐัะธั)

**ะะพะทะผะพะถะฝะพััะธ**:
- ะะฝะพะณะพััะพะฒะฝะตะฒะฐั ะธะฝะดะตะบัะฐัะธั (ะดะพะบัะผะตะฝัั, ะฑะปะพะบะธ, ะณัะฐั-ัััะฝะพััะธ)
- ะกะตะผะฐะฝัะธัะตัะบะธะน ะฟะพะธัะบ ะฟะพ ัะผััะปั
- ะะธะฑัะธะดะฝัะน ะฟะพะธัะบ ะฟะพ ะฒัะตะผ ะบะพะปะปะตะบัะธัะผ
- ะคะธะปัััะฐัะธั ะฟะพ ะผะตัะฐะดะฐะฝะฝัะผ

**ะัะตะธะผััะตััะฒะฐ**: ะะตั ะทะฐััะฐั ะฝะฐ API, ะฝะตั rate limits, ะปะพะบะฐะปัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ

---

### 4. **Pipeline Orchestrator** (`pipeline_orchestrator.py`)

**ะะฐะทะฝะฐัะตะฝะธะต**: ะะพะพัะดะธะฝะฐัะธั ะฒัะตะณะพ ะฟัะพัะตััะฐ

**ะคัะฝะบัะธะธ**: ะะพะณะธัะพะฒะฐะฝะธะต, ะพะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ, ะฑะฐัั-ัะตะถะธะผ, ะพะฟัะธะพะฝะฐะปัะฝะฐั ะธะฝะดะตะบัะฐัะธั ะฒ ะฒะตะบัะพัะฝัั ะะ

**ะะพะฝัะธะณััะฐัะธั**: YAML-ัะฐะนะป ั ะฝะฐัััะพะนะบะฐะผะธ

---

## ะััะธัะตะบัััะฐ ะพะฑัะฐะฑะพัะบะธ

```
YouTube URL
    โ
[Subtitle Extractor] โ ะกัััะต ััะฑัะธััั (JSON/SRT/TXT)
    โ
[Text Processor + OpenAI GPT] โ ะกัััะบัััะธัะพะฒะฐะฝะฝัะต ะฑะปะพะบะธ SAG v2.0 (JSON)
    โ
[ะกะธััะตะผะฐ ัะบัััะฐะบัะพัะพะฒ ะทะฝะฐะฝะธะน (5 ััะฐะฟะพะฒ)] โ ะะปัะฑะพะบะฐั ััััะบัััะธะทะฐัะธั
    โโโ ะญัะฐะฟ 1: TerminologyValidator โ ะคะธะปััั ะบะฐัะตััะฒะฐ ัะตัะผะธะฝะพะฒ
    โโโ ะญัะฐะฟ 2: NeurostalkingPatternExtractor โ ะะตัะตะบัะพั ะฟะฐััะตัะฝะพะฒ
    โโโ ะญัะฐะฟ 3: CausalChainExtractor โ ะัะธัะธะฝะฝะพ-ัะปะตะดััะฒะตะฝะฝัะต ัะตะฟะพัะบะธ
    โโโ ะญัะฐะฟ 4: ConceptHierarchyExtractor โ ะะตัะฐััะธั ะบะพะฝัะตะฟัะพะฒ
    โโโ ะญัะฐะฟ 5: SarsekenovProcessor โ ะัะบะตัััะฐัะธั ะธ ะพะฑัะตะดะธะฝะตะฝะธะต
    โ
[SAG v2.0 ะัะฐั-ะบะพะปะปะตะบัะธั] โ ะะฒัะพะผะฐัะธัะตัะบะพะต ะธะทะฒะปะตัะตะฝะธะต (ะฟะฐัะฐะปะปะตะปัะฝะพ)
    โโโ ะัะฐั-ัััะฝะพััะธ (442 ัะทะปะฐ)
    โโโ ะกะตะผะฐะฝัะธัะตัะบะธะต ัะฒัะทะธ (259 ะพัะฝะพัะตะฝะธะน)
    โโโ ะะพัะผะฐะปะธะทะฐัะธั ะธ ะฐะณัะตะณะฐัะธั
    โ
[ะะพะฟะพะปะฝะธัะตะปัะฝัะต LLM-ัะบัััะฐะบัะพัั] โ ะะฐััะธัะตะฝะฝัะต ะดะฐะฝะฝัะต
    โโโ Safety Extractor โ ะะฝัะพัะผะฐัะธั ะพ ะฑะตะทะพะฟะฐัะฝะพััะธ
    โโโ Causal Chain Extractor โ ะัะธัะธะฝะฝะพ-ัะปะตะดััะฒะตะฝะฝัะต ัะตะฟะพัะบะธ
    โโโ Concept Hierarchy Extractor โ ะะตัะฐััะธั ะบะพะฝัะตะฟัะพะฒ
    โโโ Case Study Extractor โ ะกัััะบัััะธัะพะฒะฐะฝะฝัะต ะบะตะนัั
    โโโ Prerequisite Extractor โ ะัะตะดะฟะพััะปะบะธ ะธ ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั
    โ
[Sentence-Transformers] โ ะญะผะฑะตะดะดะธะฝะณะธ (1024 dim, ะปะพะบะฐะปัะฝะพ)
    โ
[ChromaDB] โ ะะตะบัะพัะฝะฐั ะฑะฐะทะฐ ะดะฐะฝะฝัั (ัะตะผะฐะฝัะธัะตัะบะธะน ะฟะพะธัะบ)
```

**ะะฐะถะฝะพ:** 
- **OpenAI API** ะธัะฟะพะปัะทัะตััั ะดะปั ัะตะบััะพะฒะพะน ะพะฑัะฐะฑะพัะบะธ ะธ ัะฐะฑะพัั ัะบัััะฐะบัะพัะพะฒ
- **Sentence-Transformers** ะธัะฟะพะปัะทัะตััั ะดะปั ะฒะตะบัะพัะธะทะฐัะธะธ (ะปะพะบะฐะปัะฝะฐั ะณะตะฝะตัะฐัะธั ัะผะฑะตะดะดะธะฝะณะพะฒ)
- **SAG v2.0 ะัะฐั-ะบะพะปะปะตะบัะธั** ัะฐะฑะพัะฐะตั ะฐะฒัะพะผะฐัะธัะตัะบะธ (rule-based, ะฑะตะท API)
- **ะกะธััะตะผะฐ ัะบัััะฐะบัะพัะพะฒ (1-5)** ัะฐะฑะพัะฐะตั ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ ัะตัะตะท LLM
- **ะะฐะฝะฝัะต ัะบัััะฐะบัะพัะพะฒ** ัะพััะฐะฝััััั ะฟััะผะพ ะฒ ะฑะปะพะบะธ ัะธะฝะฐะปัะฝะพะณะพ JSON ัะฐะนะปะฐ

---

## ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
voice_bot_pipeline/
โโโ ๐ subtitle_extractor/      # ะะพะดัะปั ะธะทะฒะปะตัะตะฝะธั ััะฑัะธััะพะฒ
โ   โโโ ๐ get_subtitles.py     # ะัะฝะพะฒะฝะพะน ัะบัะธะฟั ะทะฐะณััะทะบะธ
โ   โโโ ๐ scripts/             # ะัะฟะพะผะพะณะฐัะตะปัะฝัะต ัะบัะธะฟัั
โ
โโโ ๐ text_processor/          # ะะฑัะฐะฑะพัะบะฐ ัะตะบััะฐ
โ   โโโ ๐ sarsekenov_processor.py  # SAG v2.0 ะดะพะผะตะฝะฝัะน ะฟัะพัะตััะพั
โ   โโโ ๐ subtitles_to_blocks.py   # ะฃะฝะธะฒะตััะฐะปัะฝัะน ะฟัะพัะตััะพั
โ   โโโ ๐ extractors/         # ะกะธััะตะผะฐ ัะบัััะฐะบัะพัะพะฒ (5 ััะฐะฟะพะฒ)
โ   โโโ ๐ validators/         # ะะฐะปะธะดะฐัะพัั ัะตัะผะธะฝะพะฒ
โ   โโโ ๐ orchestrator/        # ะัะบะตัััะฐัะพั ะธ Knowledge Graph
โ   โโโ ๐ export/             # ะญะบัะฟะพัั ะดะปั RAG
โ
โโโ ๐ vector_db/              # ะะตะบัะพัะฝะฐั ะฑะฐะทะฐ ะดะฐะฝะฝัั
โ   โโโ ๐ chromadb_manager.py  # ะฃะฟัะฐะฒะปะตะฝะธะต ChromaDB
โ   โโโ ๐ embedding_service.py # ะะตะฝะตัะฐัะธั ัะผะฑะตะดะดะธะฝะณะพะฒ
โ   โโโ ๐ vector_indexer.py   # ะะฝะดะตะบัะฐัะธั ะดะฐะฝะฝัั
โ   โโโ ๐ vector_search.py    # ะกะตะผะฐะฝัะธัะตัะบะธะน ะฟะพะธัะบ
โ
โโโ ๐ utils/                  # ะฃัะธะปะธัั
โ   โโโ ๐ video_registry.py   # ะะตะตััั ะฒะธะดะตะพ
โ   โโโ ๐ youtube_metadata_fetcher.py  # ะะตัะฐะดะฐะฝะฝัะต YouTube
โ   โโโ ๐ file_utils.py       # ะะฐะฑะพัะฐ ั ัะฐะนะปะฐะผะธ
โ
โโโ ๐ scripts/                # ะัะฟะพะผะพะณะฐัะตะปัะฝัะต ัะบัะธะฟัั
โ   โโโ ๐ manage_registry.py  # ะฃะฟัะฐะฒะปะตะฝะธะต ัะตะตัััะพะผ
โ   โโโ ๐ index_existing_files.py  # ะะฝะดะตะบัะฐัะธั ัััะตััะฒัััะธั ัะฐะนะปะพะฒ
โ   โโโ ๐ test_vector_search.py  # ะขะตััะธัะพะฒะฐะฝะธะต ะฟะพะธัะบะฐ
โ
โโโ ๐ tests/                  # ะขะตััั
โ   โโโ ๐ extractors/         # ะขะตััั ัะบัััะฐะบัะพัะพะฒ
โ   โโโ ๐ orchestrator/       # ะขะตััั ะพัะบะตัััะฐัะพัะฐ
โ   โโโ ๐ integration/        # ะะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั
โ
โโโ ๐ data/                   # ะะฐะฝะฝัะต
โ   โโโ ๐ raw_subtitles/      # ะััะพะดะฝัะต ััะฑัะธััั
โ   โโโ ๐ sag_final/          # SAG v2.0 ัะตะทัะปััะฐัั
โ   โโโ ๐ chromadb/           # ะะตะบัะพัะฝะฐั ะะ
โ   โโโ video_registry.json    # ะะตะตััั ะฒะธะดะตะพ
โ
โโโ ๐ pipeline_orchestrator.py  # ะะปะฐะฒะฝัะน ะพัะบะตัััะฐัะพั
โโโ ๐ config.yaml             # ะะพะฝัะธะณััะฐัะธั
โโโ ๐ .env                    # ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (ะฝะต ะฒ Git)
โโโ ๐ README.md               # ะะพะบัะผะตะฝัะฐัะธั
```

---

## ะะฐะฒะธะณะฐัะธั

- [ะะฐะทะฐะด ะบ README](../README.md)
- [ะกะธััะตะผะฐ ัะบัััะฐะบัะพัะพะฒ](./extractors-system.md)
- [ะะพะฝัะธะณััะฐัะธั](./configuration.md)
- [ะกัััะบัััะฐ ะดะฐะฝะฝัั](./data-structure.md)
- [ะะตะบัะพัะฝะฐั ะฑะฐะทะฐ ะดะฐะฝะฝัั](./vector-database.md)

