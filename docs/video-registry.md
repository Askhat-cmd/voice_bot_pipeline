# üìä –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–µ–æ-—Ä–µ–µ—Å—Ç—Ä–æ–º

## –ù–∞–≤–∏–≥–∞—Ü–∏—è

- [–ù–∞–∑–∞–¥ –∫ README](../README.md)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](./getting-started.md)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö](./data-structure.md)

---

## –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–µ–æ-–¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ 500+ –≤–∏–¥–µ–æ. –°–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫—É –¥—É–±–ª–∏–∫–∞—Ç–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
- ‚úÖ **–ü–æ–ª–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** - –ø–æ–ª—É—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ YouTube Data API v3
- ‚úÖ **–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –ø–æ –¥–∞—Ç–∞–º** - —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `{year}/{month}/`
- ‚úÖ **–ß–∏—Ç–∞–µ–º—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤** - —Ñ–æ—Ä–º–∞—Ç `{date}_{video_id}_{safe_title}.{ext}`
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—é –æ–±—Ä–∞–±–æ—Ç–∫–∏** - –ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–µ–æ
- ‚úÖ **CLI —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - —É–¥–æ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. Video Registry (`utils/video_registry.py`)

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –≤—Å–µ—Ö –≤–∏–¥–µ–æ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∏ –∏—Å—Ç–æ—Ä–∏–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤: `pending`, `processing`, `processed`, `failed`, `skipped`
- –ò—Å—Ç–æ—Ä–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ (–±–ª–æ–∫–∏, —Å—É—â–Ω–æ—Å—Ç–∏, –≤—Ä–µ–º—è, —Å—Ç–æ–∏–º–æ—Å—Ç—å API)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—É—Ç–µ–π –∫ —Ñ–∞–π–ª–∞–º (raw_subtitles, sag_json, sag_md)
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–µ—Å—Ç—Ä–∞

**–§–æ—Ä–º–∞—Ç —Ä–µ–µ—Å—Ç—Ä–∞:**
```json
{
  "version": "1.0",
  "last_updated": "2025-12-04T14:11:00+05:00",
  "total_videos": 500,
  "processed": 3,
  "failed": 0,
  "pending": 497,
  "videos": {
    "HndVzdJuAz0": {
      "video_id": "HndVzdJuAz0",
      "title": "–ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä: –ü—Ä–æ—Ü–µ—Å—Å –∏—Å—Ü–µ–ª–µ–Ω–∏—è –±–µ–∑ –≥–µ—Ä–æ–∏–∑–º–∞",
      "channel": "Salamat Sarsekenov",
      "published_date": "2024-03-15T18:30:00Z",
      "duration_seconds": 2340,
      "url": "https://www.youtube.com/watch?v=HndVzdJuAz0",
      "status": "processed",
      "processing_history": [...],
      "files": {
        "raw_subtitles": "data/raw_subtitles/2024/03/2024-03-15_HndVzdJuAz0_–ü—Ä–æ—Ü–µ—Å—Å_–∏—Å—Ü–µ–ª–µ–Ω–∏—è.json",
        "sag_json": "data/sag_final/2024/03/2024-03-15_HndVzdJuAz0.for_vector.json",
        "sag_md": "data/sag_final/2024/03/2024-03-15_HndVzdJuAz0.for_review.md"
      },
      "metadata": {...}
    }
  }
}
```

---

### 2. YouTube Metadata Fetcher (`utils/youtube_metadata_fetcher.py`)

–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ YouTube Data API v3.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è, –∫–∞–Ω–∞–ª–∞, –¥–∞—Ç—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –∏ —Ç–µ–≥–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –∏ –∏—Ö —Ç–∏–ø–∞
- Fallback –Ω–∞ –±–∞–∑–æ–≤—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- API –∫–ª—é—á YouTube Data API v3 –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `YOUTUBE_API_KEY`
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `google-api-python-client`

---

### 3. File Utils (`utils/file_utils.py`)

–£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–º–µ–Ω–∞–º–∏ —Ñ–∞–π–ª–æ–≤ –∏ –ø—É—Ç—è–º–∏.

**–§—É–Ω–∫—Ü–∏–∏:**
- `create_safe_filename()` - –æ—á–∏—Å—Ç–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏–π –æ—Ç —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤
- `create_filename()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–º–µ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ `{date}_{video_id}_{safe_title}.{ext}`
- `get_date_paths()` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—É—Ç–µ–π –ø–æ –¥–∞—Ç–∞–º `{year}/{month}/`

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Pipeline

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ `pipeline_orchestrator.py`:

1. **–ü–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π:**
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ video_id –∏–∑ URL
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (`registry.is_processed()`)
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ YouTube API
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–µ—Å—Ç—Ä (–µ—Å–ª–∏ –Ω–æ–≤–æ–µ)

2. **–í–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ `processing`
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å –¥–∞—Ç–∞–º–∏ –∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
   - –ó–∞–ø–∏—Å—å –ø—É—Ç–µ–π –∫ —Ñ–∞–π–ª–∞–º –≤ —Ä–µ–µ—Å—Ç—Ä

3. **–ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
   - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –æ–± –æ–±—Ä–∞–±–æ—Ç–∫–µ (ProcessingRecord)
   - –ü–æ–¥—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫ (–±–ª–æ–∫–∏, —Å—É—â–Ω–æ—Å—Ç–∏, –≤—Ä–µ–º—è, —Å—Ç–æ–∏–º–æ—Å—Ç—å)
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ `processed` –∏–ª–∏ `failed`

---

## CLI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–µ—Å—Ç—Ä–æ–º

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```powershell
pip install click google-api-python-client
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```powershell
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–µ—Å—Ç—Ä–∞
python scripts/manage_registry.py stats

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –≤–∏–¥–µ–æ
python scripts/manage_registry.py info HndVzdJuAz0

# –°–ø–∏—Å–æ–∫ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ
python scripts/manage_registry.py pending

# –°–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –≤–∏–¥–µ–æ
python scripts/manage_registry.py failed
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ `stats`:**
```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–µ—Å—Ç—Ä–∞ –≤–∏–¥–µ–æ:
==================================================
–í—Å–µ–≥–æ –≤–∏–¥–µ–æ:      500
–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ:       3
–û—à–∏–±–æ–∫:           0
–í –æ—á–µ—Ä–µ–¥–∏:        497
–í—Å–µ–≥–æ –±–ª–æ–∫–æ–≤:     15
–í—Å–µ–≥–æ —Å—É—â–Ω–æ—Å—Ç–µ–π:  37
–ó–∞—Ç—Ä–∞—Ç—ã API:      $0.05
–°—Ä–µ–¥–Ω–∏–π –±–ª–æ–∫–æ–≤/–≤–∏–¥–µ–æ: 5.0
==================================================
```

---

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ –≤ —Ä–µ–µ—Å—Ç—Ä:

```powershell
python scripts/migrate_existing_videos.py
```

–°–∫—Ä–∏–ø—Ç:
- –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ –≤ `data/sag_final/`
- –ü–æ–ª—É—á–∞–µ—Ç –∏—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ YouTube API
- –î–æ–±–∞–≤–ª—è–µ—Ç –≤ —Ä–µ–µ—Å—Ç—Ä —Å –∏—Å—Ç–æ—Ä–∏–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```env
# –ö–ª—é—á –¥–ª—è YouTube Data API v3 (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –ø–æ–ª–Ω—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö)
YOUTUBE_API_KEY=AIzaSyD7VKqPUiiJYI3XYy6nwYFwUcfZNblQU4w
```

**–ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–∞:**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://console.cloud.google.com/apis/credentials
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –í–∫–ª—é—á–∏—Ç–µ YouTube Data API v3
4. –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á
5. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (config.yaml)

```yaml
pipeline:
  # –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É —Ä–µ–µ—Å—Ç—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  registry_path: "data/video_registry.json"  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π  
‚úÖ **–ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è** - –∫–æ–≥–¥–∞ –∏ –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ—Å—å –∫–∞–∂–¥–æ–µ –≤–∏–¥–µ–æ  
‚úÖ **–ß–∏—Ç–∞–µ–º—ã–µ –∏–º–µ–Ω–∞** - —Å—Ä–∞–∑—É –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –∑–∞ —Ñ–∞–π–ª  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–µ —Ä–∞–∑–≤–∞–ª–∏—Ç—Å—è –Ω–∞ 1000+ –≤–∏–¥–µ–æ  
‚úÖ **–õ–µ–≥–∫–∏–π –ø–æ–∏—Å–∫** - –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º  
‚úÖ **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞—Ç—Ä–∞—Ç** - —Å–∫–æ–ª—å–∫–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ –Ω–∞ API  
‚úÖ **–í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏** - –≤–∏–¥–Ω–æ, —á—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å  
‚úÖ **CLI —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - —É–¥–æ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞  

---

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ
- –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –ø–æ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Å –¥–∞—Ç–∞–º–∏
- –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –º–æ–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ `migrate_existing_videos.py`
- –†–µ–µ—Å—Ç—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

---

## –ù–∞–≤–∏–≥–∞—Ü–∏—è

- [–ù–∞–∑–∞–¥ –∫ README](../README.md)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](./getting-started.md)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö](./data-structure.md)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](./architecture.md)

